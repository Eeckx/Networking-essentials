<section>
  <h1>ğŸ–¥ï¸ Failover Clustering â€“ High Availability voor Windows Server</h1>

  <section>
    <h2>ğŸ¯ Doelstelling</h2>
    <p>
      Installeer en configureer Windows Server Failover Clustering (WSFC) voor hoge beschikbaarheid (HA) van servers en applicaties
      zoals SQL Server, Hyper-V, File Services en andere kritieke workloads.
    </p>
  </section>

  <section class="infra-flex">
    <h2>ğŸ§° Voorwaarden</h2>
    <div class="infra-flex-row header">
      <div>Voorwaarde</div>
      <div>Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">Windows Server 2019, 2022 of nieuwer</div>
      <div data-label="Opmerkingen">Alle nodes moeten compatibel zijn</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">Minimaal 2 nodes</div>
      <div data-label="Opmerkingen">Fysiek of virtueel</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">Static IP-adressen en netwerkconnectiviteit</div>
      <div data-label="Opmerkingen">Controleer ping en firewall rules (TCP/UDP 3343, RPC)</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">Gedeelde opslag</div>
      <div data-label="Opmerkingen">SAN, SMB 3.0 share of Storage Spaces Direct</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">Administrator rechten op nodes</div>
      <div data-label="Opmerkingen">Vereist voor installatie en configuratie</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Voorwaarde">DNS en Active Directory functioneel</div>
      <div data-label="Opmerkingen">Voor clusternaam registratie</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>âš™ï¸ Installatie Failover Clustering</h2>
    <div class="infra-flex-row header">
      <div>Actie</div>
      <div>PowerShell / Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Installeer Failover Clustering feature</div>
      <div data-label="PowerShell / Opmerkingen">
        <code>Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools</code> <br>
        Op alle nodes uitvoeren
      </div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ” Validatie</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>PowerShell / Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Controleer hardware en netwerk</div>
      <div data-label="PowerShell / Opmerkingen">
        Ping tussen nodes, gedeelde opslag zichtbaar, firewall rules correct
      </div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Cluster Validation Wizard uitvoeren</div>
      <div data-label="PowerShell / Opmerkingen">
        <code>Test-Cluster -Node Node1,Node2</code> <br>
        Rapporten analyseren, alles moet "Passed" zijn
      </div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ—ï¸ Cluster aanmaken</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Wizard openen</div>
      <div data-label="Beschrijving">Failover Cluster Manager â†’ Create Cluster â†’ Next</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Selecteer nodes</div>
      <div data-label="Beschrijving">Alle nodes toevoegen die cluster vormen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Clusternaam en IP instellen</div>
      <div data-label="Beschrijving">Bijv. <code>HA-Cluster01</code>, statisch IP</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">Wizard voltooien</div>
      <div data-label="Beschrijving">CNO aangemaakt in AD, quorum ingesteld, controleer clusterstatus</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>âš¡ Quorum configuratie</h2>
    <div class="infra-flex-row header">
      <div>Type</div>
      <div>Beschrijving / PowerShell</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Type">Node Majority</div>
      <div data-label="Beschrijving">Even aantal nodes + witness</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Type">Node and Disk Majority</div>
      <div data-label="Beschrijving">Met gedeelde disk</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Type">Node and File Share Majority</div>
      <div data-label="Beschrijving">Via SMB share <code>Set-ClusterQuorum -NodeAndFileShareMajority "\\FileServer\ClusterShare"</code></div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Type">Dynamic quorum</div>
      <div data-label="Beschrijving">Aanbevolen vanaf 2012</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ› ï¸ Rollen en resources</h2>
    <div class="infra-flex-row header">
      <div>Actie</div>
      <div>Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Rol toevoegen</div>
      <div data-label="Opmerkingen">
        Hyper-V, File Server, SQL FCI, DHCP, IIS, Print Server
      </div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Resources beheren</div>
      <div data-label="Opmerkingen">
        IP addresses, shared storage, Cluster Name Object (CNO)
      </div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ” Failover testen</h2>
    <div class="infra-flex-row header">
      <div>Actie</div>
      <div>Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Move role naar andere node</div>
      <div data-label="Opmerkingen">Failover Cluster Manager â†’ Roles â†’ Move â†’ Select Node</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Simuleer node failure</div>
      <div data-label="Opmerkingen">Shutdown of disconnect network â†’ observeer failover</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Event logs bekijken</div>
      <div data-label="Opmerkingen">
        Event Viewer â†’ Applications and Services Logs â†’ Microsoft â†’ Windows â†’ FailoverClustering
      </div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ“Š Monitoring en beheer</h2>
    <div class="infra-flex-row header">
      <div>Actie</div>
      <div>PowerShell / Opmerkingen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Cluster overzicht</div>
      <div data-label="PowerShell / Opmerkingen">Failover Cluster Manager â†’ Dashboard</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">PowerShell monitoring</div>
      <div data-label="PowerShell / Opmerkingen">
        <code>Get-Cluster</code>, <code>Get-ClusterNode</code>, <code>Get-ClusterGroup</code>, <code>Get-ClusterResource</code>
      </div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Actie">Alerts configureren</div>
      <div data-label="PowerShell / Opmerkingen">Event Viewer of SIEM</div>
    </div>
  </section>

  <section>
    <h2>ğŸ’¡ Best Practices</h2>
    <ul>
      <li>Minimaal 2 nodes, idealiter 3+ voor hoge beschikbaarheid</li>
      <li>Quorum passend bij aantal nodes en storage</li>
      <li>Betrouwbare en redundante shared storage (SAN, Storage Spaces Direct)</li>
      <li>Cluster Validation Wizard uitvoeren vÃ³Ã³r productie</li>
      <li>Failover testen vÃ³Ã³r implementatie</li>
      <li>Documenteer architectuur, IPâ€™s en roles</li>
      <li>Gebruik separate VLANâ€™s voor cluster communicatie</li>
    </ul>
  </section>

  <section>
    <h2>ğŸ§¾ Conclusie</h2>
    <p>
      WSFC biedt een robuuste oplossing voor hoge beschikbaarheid. Correcte configuratie van nodes, quorum, roles en failover testen
      minimaliseert downtime en beschermt kritieke workloads.
    </p>
  </section>
</section>
