<section>
  <h1>ğŸ›¡ï¸ Network Policy Server (NPS) â€“ RADIUS Authenticatie & Toegangsbeheer</h1>

  <section>
    <h2>ğŸ¯ Doelstelling</h2>
    <p>
      Leer hoe je <strong>NPS</strong> installeert en configureert voor centrale RADIUS-authenticatie, autorisatie en accounting
      voor VPN, 802.1X draadloze toegang, bekabelde switches of RRAS.
    </p>
  </section>

  <section class="infra-flex">
    <h2>ğŸ§° Installatie van NPS</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">Server Manager â†’ Add Roles and Features â†’ Role-based installation â†’ Network Policy and Access Services â†’ Network Policy Server â†’ Install.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">2</div>
      <div data-label="Beschrijving">PowerShell alternatief:
        <pre><code class="language-powershell">
Install-WindowsFeature NPAS -IncludeManagementTools
        </code></pre>
      </div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ”— Koppeling met Active Directory</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">Server Manager â†’ Tools â†’ Network Policy Server â†’ Rechtsklik NPS (Local) â†’ Register server in Active Directory â†’ OK.</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ“¡ RADIUS Clients toevoegen</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">NPS-console â†’ RADIUS Clients and Servers â†’ RADIUS Clients â†’ New â†’ Naam + IP/DNS + Shared Secret â†’ OK.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">2</div>
      <div data-label="Beschrijving">In RRAS-console â†’ Properties â†’ Security â†’ Authentication provider â†’ RADIUS Authentication â†’ Configure â†’ IP van NPS + shared secret.</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ§© Network Policies configureren</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">Policies â†’ Network Policies â†’ New â†’ Naam (bijv. VPN Access Policy) â†’ Next â†’ Voeg voorwaarden toe (User Groups, NAS Port Type, Day/Time).</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">2</div>
      <div data-label="Beschrijving">Access Permission â†’ Grant access â†’ Authentication Methods â†’ MS-CHAPv2 of EAP (PEAP/EAP-TLS) â†’ Finish.</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ” Certificaatconfiguratie</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">Installeer servercertificaat via AD CS of extern CA (FQDN in Subject).</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">2</div>
      <div data-label="Beschrijving">NPS-console â†’ Network Policy â†’ EAP-instellingen â†’ PEAP of EAP-TLS â†’ kies certificaat â†’ optioneel Enforce encryption.</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ“Š Accounting configureren</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">NPS (Local) â†’ Accounting â†’ Local File of SQL Logging â†’ IAS-format â†’ opslaglocatie %SystemRoot%\System32\LogFiles.</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ“ˆ Controle en troubleshooting</h2>
    <div class="infra-flex-row header">
      <div>Stap</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">1</div>
      <div data-label="Beschrijving">Event Viewer â†’ Custom Views â†’ Server Roles â†’ Network Policy and Access Services.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">2</div>
      <div data-label="Beschrijving">PowerShell: <pre><code class="language-powershell">Get-NpsNetworkPolicy</code></pre></div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Stap">3</div>
      <div data-label="Beschrijving">Controleer firewalls: UDP 1812 (auth), UDP 1813 (accounting).</div>
    </div>
  </section>

  <section class="infra-flex">
    <h2>ğŸ§  Geavanceerde scenario's</h2>
    <div class="infra-flex-row header">
      <div>Scenario</div>
      <div>Beschrijving</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Scenario">802.1X draadloos/bekabeld</div>
      <div data-label="Beschrijving">Koppel NPS aan RADIUS-compatibele switch of access point.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Scenario">VPN-authenticatie via RRAS</div>
      <div data-label="Beschrijving">Gebruik NPS als externe authenticator in plaats van lokale Windows-accounts.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Scenario">RADIUS Proxy</div>
      <div data-label="Beschrijving">Stuur authenticatieverzoeken door naar andere NPS-servers (multi-site).</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Scenario">SQL Logging</div>
      <div data-label="Beschrijving">Log verbindingen in SQL voor compliance en auditing.</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Scenario">Health Policies (NAP)</div>
      <div data-label="Beschrijving">Controleer antivirus/firewallstatus van clients (optioneel, legacy).</div>
    </div>
  </section>

  <section>
    <h2>ğŸ’¡ Best Practices</h2>
    <ul>
      <li>Dedicated NPS-server i.p.v. op DC.</li>
      <li>Beperk toegangsrechten via groepen (bijv. VPN-Users).</li>
      <li>Gebruik PEAP of EAP-TLS i.p.v. MS-CHAPv2.</li>
      <li>Activeer logging en archiveer regelmatig.</li>
      <li>Network Load Balancing voor redundante servers.</li>
      <li>Complex shared secrets en periodiek wijzigen.</li>
    </ul>
  </section>

  <section>
    <h2>ğŸ§¾ Conclusie</h2>
    <p>
      NPS centraliseert authenticatie, autorisatie en accounting voor netwerktoegang. In combinatie met RRAS of 802.1X-netwerken vormt het een veilige en krachtige basis voor toegangsbeheer.
    </p>
  </section>
</section>
