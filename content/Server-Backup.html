<section>
  <h1>💾 Windows Server Backup – Installatie, Configuratie en Herstel</h1>

  <section>
    <h2>🎯 Doelstelling</h2>
    <p>
      In dit lab leer je hoe je <strong>Windows Server Backup</strong> installeert, configureert en gebruikt voor zowel handmatige als geplande back-ups.
      Daarnaast leer je hoe je bestanden, systeemstatus en volledige servers kunt herstellen.
      Deze tool is essentieel voor het beveiligen van kritieke data en systeemherstel na fouten of dataverlies.
    </p>
  </section>

  <section>
    <h2>🧰 Installatie</h2>
    <ol>
      <li>Open <strong>Server Manager → Add Roles and Features</strong>.</li>
      <li>Kies <strong>Role-based or feature-based installation</strong>.</li>
      <li>Navigeer naar <strong>Features</strong> en vink <strong>Windows Server Backup</strong> aan.</li>
      <li>Klik <strong>Next → Install</strong> en wacht tot de installatie voltooid is.</li>
      <li>PowerShell alternatief:
        <pre><code class="language-powershell">
Install-WindowsFeature -Name Windows-Server-Backup
        </code></pre>
      </li>
      <li>Na installatie: open de tool via <strong>Server Manager → Tools → Windows Server Backup</strong>.</li>
    </ol>
  </section>

  <section>
    <h2>🗂️ Soorten back-ups</h2>
    <ul>
      <li><strong>Full Server Backup:</strong> Back-upt alle volumes, inclusief systeemstatus en configuratie.</li>
      <li><strong>Custom Backup:</strong> Specifieke mappen, bestanden of volumes.</li>
      <li><strong>System State Backup:</strong> Alleen systeembestanden, AD, registry, boot files, enz.</li>
      <li><strong>Bare Metal Recovery (BMR):</strong> Volledige serverherstel inclusief OS en bootomgeving.</li>
    </ul>
  </section>

  <section>
    <h2>🧭 Back-up configureren</h2>
    <h3>Stap 1 – Nieuwe back-up aanmaken</h3>
    <ol>
      <li>Open <strong>Windows Server Backup</strong>.</li>
      <li>Klik <strong>Local Backup → Backup Schedule…</strong> om een geplande back-up in te stellen.</li>
      <li>Kies <strong>Full Server</strong> (aanbevolen) of <strong>Custom</strong> voor specifieke mappen.</li>
      <li>Kies <strong>Once a day</strong> of meerdere tijdstippen per dag (voor servers met veel wijzigingen).</li>
      <li>Selecteer het back-updoel:
        <ul>
          <li><strong>Dedicated hard disk</strong> – beste optie (maakt automatisch beheer aan).</li>
          <li><strong>Volume</strong> – goed alternatief voor gedeelde schijven.</li>
          <li><strong>Network share (UNC path)</strong> – voor offsite of centrale back-ups (bijv. \\FileServer\Backups).</li>
        </ul>
      </li>
      <li>Voltooi de wizard en start de eerste back-up.</li>
    </ol>

    <h3>PowerShell alternatief</h3>
    <pre><code class="language-powershell">
# Volledige back-up naar D:\Backups
wbadmin start backup -backupTarget:D: -include:C: -allCritical -quiet
    </code></pre>
  </section>

  <section>
    <h2>📅 Geplande back-ups beheren</h2>
    <ul>
      <li>Controleer bestaande schema’s via <strong>Windows Server Backup → Local Backup → Scheduled Backup</strong>.</li>
      <li>Gebruik <code>wbadmin get versions</code> om bestaande back-ups te bekijken.</li>
      <li>Controleer back-up logs via <code>Event Viewer → Applications and Services Logs → Microsoft → Windows → Backup</code>.</li>
      <li>Wijzig schema’s indien nodig (tijdstip of doel wijzigen via <strong>Backup Schedule Wizard</strong>).</li>
    </ul>

    <pre><code class="language-powershell">
# Back-up schema wijzigen
wbadmin enable backup -addtarget:\\BackupServer\DailyBackups -schedule:09:00,21:00 -include:C: -allCritical -quiet
    </code></pre>
  </section>

  <section>
    <h2>🧾 Herstelopties</h2>

    <h3>1️⃣ Bestanden of mappen herstellen</h3>
    <ol>
      <li>Open <strong>Windows Server Backup → Local Backup → Recover…</strong>.</li>
      <li>Kies bronlocatie van de back-up (lokaal of netwerk).</li>
      <li>Selecteer <strong>Files and Folders</strong> en het gewenste herstelpunt.</li>
      <li>Kies waar de bestanden worden hersteld:
        <ul>
          <li><strong>Original location</strong> – overschrijft bestaande bestanden.</li>
          <li><strong>Alternate location</strong> – herstelt naar andere map.</li>
        </ul>
      </li>
    </ol>

    <h3>2️⃣ Systeemstatus of volledige server herstellen</h3>
    <ul>
      <li>Gebruik de optie <strong>System State</strong> in de herstelwizard.</li>
      <li>Of start de server via <strong>Windows Recovery Environment (WinRE)</strong> en kies <strong>Repair your computer → System Image Recovery</strong>.</li>
    </ul>

    <h3>3️⃣ PowerShell herstel</h3>
    <pre><code class="language-powershell">
# Lijst beschikbare back-ups
wbadmin get versions

# Herstel systeembestanden
wbadmin start recovery -version:10/30/2025-09:00 -itemType:File -items:C:\Data -recoveryTarget:D:\Restore
    </code></pre>
  </section>

  <section>
    <h2>🧠 Best practices</h2>
    <ul>
      <li>Gebruik een <strong>dedicated back-upschijf</strong> of netwerkshare.</li>
      <li>Activeer **offsite of offline rotatie** (verwijder schijven periodiek om ransomware te vermijden).</li>
      <li>Controleer regelmatig of de back-ups succesvol voltooien (Event Viewer + test restore!).</li>
