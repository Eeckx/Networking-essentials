<article class="content">
  <h1>Hyper-V Remote Desktop Services (RDS) Lab</h1>

  <section>
    <h2>üéØ Doelstelling</h2>
    <p>
      Dit lab leert je hoe je een volledige Remote Desktop Services (RDS)-omgeving opzet en beheert binnen een Hyper-V infrastructuur.
      Je leert stap voor stap de RDS-rollen installeren, configureren, gebruikerssessies beheren, RDS licensing instellen en beveiliging toepassen via SSL en policies.
      Daarnaast ontdek je uitbreidingen zoals Web Access, RemoteApp publicatie en Gateway-toegang voor externe gebruikers.
    </p>
  </section>

  <section class="infra-flex">
    <h3>üß© Benodigde infrastructuur</h3>

    <div class="infra-flex-row header">
      <div>Component</div>
      <div>Minimumvereisten</div>
      <div>Aanbevolen</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Component">Host OS</div>
      <div data-label="Minimumvereisten">Windows Server 2019 of 2022</div>
      <div data-label="Aanbevolen">Windows Server 2022 Datacenter</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Component">VM-configuratie</div>
      <div data-label="Minimumvereisten">2 vCPU, 4 GB RAM, 40 GB HDD</div>
      <div data-label="Aanbevolen">4 vCPU, 8 GB RAM, 60 GB SSD</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Component">Rollen</div>
      <div data-label="Minimumvereisten">Session Host, Licensing</div>
      <div data-label="Aanbevolen">Session Host, Connection Broker, Web Access, Gateway</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Component">Netwerk</div>
      <div data-label="Minimumvereisten">Internal switch</div>
      <div data-label="Aanbevolen">Internal + External switch voor remote toegang</div>
    </div>
  </section>

  <section>
    <h2>üèóÔ∏è Installatie en Configuratie van RDS</h2>

    <h3>Stap 1 ‚Äì Voorbereiding</h3>
    <ul>
      <li>Controleer dat de server lid is van het domein (<code>lab.local</code>).</li>
      <li>Controleer DNS-resolutie en netwerkconnectiviteit.</li>
      <li>Maak eventueel een aparte OU in AD voor RDS-servers.</li>
      <li>Voeg gebruikers toe die toegang mogen krijgen (bijv. <code>LabUsers</code> groep).</li>
    </ul>

    <h3>Stap 2 ‚Äì Installatie van RDS-rollen</h3>
    <ol>
      <li>Open <strong>Server Manager ‚Üí Add Roles and Features</strong>.</li>
      <li>Kies <strong>Remote Desktop Services installation</strong> i.p.v. Role-based installatie.</li>
      <li>Kies implementatietype:
        <ul>
          <li><strong>Standard deployment:</strong> Voor productie, meerdere servers mogelijk</li>
          <li><strong>Quick Start:</strong> Alles op √©√©n server (lab)</li>
        </ul>
      </li>
      <li>Vink volgende rollen aan: RDSH, Licensing, Connection Broker, Web Access</li>
      <li>Herstart de server na installatie.</li>
      <li>PowerShell alternatief:
        <pre><code class="language-powershell">
Install-WindowsFeature RDS-RD-Server, RDS-Licensing, RDS-Connection-Broker, RDS-Web-Access -IncludeManagementTools
        </code></pre>
      </li>
    </ol>

    <h3>Stap 3 ‚Äì RDS-beheer en Collections aanmaken</h3>
    <ol>
      <li>Server Manager ‚Üí RDS ‚Üí Collections ‚Üí Create Session Collection</li>
      <li>Geef de collection een naam (bijv. <strong>RDS-Lab-Users</strong>).</li>
      <li>Selecteer de RDSH-server(s) die deel uitmaken van de collection.</li>
      <li>Wijs gebruikers of groepen toe (bijv. <code>LabUsers</code>).</li>
      <li>Kies pad voor gebruikersprofielen (optioneel):
        <pre><code>\\FILE01\Profiles\%USERNAME%</code></pre>
      </li>
    </ol>

    <h3>Stap 4 ‚Äì RDS Licensing configureren</h3>
    <ul>
      <li>Server Manager ‚Üí Remote Desktop Licensing Manager ‚Üí Activate Server</li>
      <li>Kies licentietype: Per Device of Per User</li>
      <li>Voeg licentiesleutels toe indien beschikbaar.</li>
      <li>PowerShell alternatief:
        <pre><code class="language-powershell">
Set-RDLicenseConfiguration -LicenseServer "RDS01.lab.local" -Mode PerUser
        </code></pre>
      </li>
    </ul>

    <h3>Stap 5 ‚Äì Beveiliging en certificaten</h3>
    <ul>
      <li>SSL-certificaat voor RDS Web Access en Gateway componenten.</li>
      <li>RDS Deployment Properties ‚Üí Certificates: importeer certificaat (.pfx) en koppel aan alle RDS-componenten.</li>
      <li>PowerShell voorbeeld voor zelfondertekend certificaat:
        <pre><code class="language-powershell">
New-SelfSignedCertificate -DnsName "rds.lab.local" -CertStoreLocation "Cert:\LocalMachine\My"
        </code></pre>
      </li>
      <li>Gebruik Group Policy voor NLA, sessietijden, TLS 1.2-only RDP.</li>
    </ul>

    <h3>Stap 6 ‚Äì Web Access configureren</h3>
    <ul>
      <li>Browser: <code>https://rds.lab.local/RDWeb</code>, login met <code>LabUsers</code>.</li>
      <li>Controleer gepubliceerde apps of desktops.</li>
      <li>Server Manager ‚Üí RemoteApp Programs ‚Üí Publish RemoteApp Programs (bijv. Notepad).</li>
    </ul>

    <h3>Stap 7 ‚Äì Gateway instellen (optioneel)</h3>
    <ul>
      <li>Install-WindowsFeature RDS-Gateway -IncludeManagementTools</li>
      <li>Configureer CAP en RAP via RD Gateway Manager</li>
      <li>Gebruik geldig SSL-certificaat voor poort 443</li>
    </ul>

    <h3>Stap 8 ‚Äì Load balancing en schaalbaarheid</h3>
    <ul>
      <li>Gebruik Connection Broker om sessies over meerdere RDSH-servers te verdelen.</li>
      <li>Extra RDSH-servers toevoegen via Server Manager ‚Üí Add RDSH servers to collection.</li>
      <li>DNS round robin of hardware load balancer voor Web Access/Gateway redundantie.</li>
    </ul>

    <h3>Stap 9 ‚Äì Testing en validatie</h3>
    <ul>
      <li>Test RDP: <code>mstsc /v:rds.lab.local</code></li>
      <li>Controleer sessies via Server Manager ‚Üí RDS Collections ‚Üí Sessions</li>
      <li>Test RemoteApp via browser of Remote Desktop Client</li>
      <li>Valideer licentiegebruik via RD Licensing Manager</li>
      <li>Controleer Event Viewer ‚Üí TerminalServices-* logs</li>
    </ul>
  </section>

  <section>
    <h2>üîê Extra mogelijkheden binnen RDS</h2>
    <ul>
      <li>RemoteApp: publiceer specifieke apps</li>
      <li>Personal Session Desktops: vaste host per gebruiker</li>
      <li>Profile Disks: centrale profielen (bijv. FsLogix)</li>
      <li>RDS Gateway + RD Web: externe toegang via HTTPS</li>
      <li>GPU acceleration (indien ondersteund)</li>
      <li>Group Policy beheer voor sessies, printers, schijven, clipboard</li>
    </ul>
  </section>

  <section class="infra-flex">
    <h3>üìä Troubleshooting</h3>

    <div class="infra-flex-row header">
      <div>Probleem</div>
      <div>Oplossing</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Probleem">Geen verbinding via RDP</div>
      <div data-label="Oplossing">Controleer firewall, RDP-service, NLA, certificaatbinding</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Probleem">Licentiewaarschuwing</div>
      <div data-label="Oplossing">Controleer RD Licensing-configuratie en CAL-status</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Probleem">Web Access toont geen apps</div>
      <div data-label="Oplossing">Controleer RemoteApp-publicatie en gebruikersrechten</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Probleem">Externe toegang Gateway mislukt</div>
      <div data-label="Oplossing">Controleer SSL-certificaat, CAP/RAP policies en poort 443</div>
    </div>

    <div class="infra-flex-row">
      <div data-label="Probleem">Trage sessies of disconnects</div>
      <div data-label="Oplossing">Controleer netwerkbandbreedte, load balancing, performance counters</div>
    </div>
  </section>

  <section>
    <h2>üßæ Conclusie</h2>
    <p>
      Na dit lab kun je een complete RDS-omgeving opzetten, configureren en beveiligen binnen Hyper-V. 
      Je begrijpt de rol van Session Hosts, Connection Brokers, Licensing, Web Access en Gateway, 
      en kunt gebruikers veilige, schaalbare en flexibele toegang geven tot desktop- en applicatieomgevingen. 
      Dit vormt de basis voor geavanceerde VDI-implementaties.
    </p>
  </section>
</article>
